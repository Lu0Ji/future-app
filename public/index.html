<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <title>FutureCast - Tahmin Sosyal Ağı</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="topbar">
        <div class="topbar-left">
          <div class="logo-mark">⏳</div>
          <div class="logo-text">
            <span class="logo-title">FutureCast</span>
            <span class="logo-sub">Zaman kapsülü tahminler</span>
          </div>
        </div>
        <div class="topbar-center">
          <input
            id="global-search"
            class="input input-ghost"
            placeholder="Kullanıcı veya tahmin ara (şimdilik pasif)"
          />
        </div>
        <div class="topbar-right">
          <div id="user-info" class="current-user-info">
            Giriş yapmadınız
          </div>
          <button id="logout-button" class="btn ghost-btn">Çıkış</button>
        </div>
      </header>

      <nav class="primary-nav">
        <button class="nav-link nav-link-active" type="button" data-page="page-home">
          Ana sayfa
        </button>
        <button class="nav-link" type="button" data-page="page-profile">
          Profil
        </button>
        <button class="nav-link" type="button" data-page="page-messages">
          Mesajlar
        </button>
        <button class="nav-link" type="button" data-page="page-settings">
          Ayarlar
        </button>
      </nav>

      <!-- SAYFA: ANA SAYFA (mevcut layout) -->
      <div class="app-page app-page-active" id="page-home">

      <main class="layout">
        <!-- SOL SÜTUN: AUTH + YENİ TAHMİN -->
        <aside class="sidebar-left">
          <section class="card auth-card">
            <h2>Hesabın</h2>
            <div class="auth-forms">
              <form id="register-form" class="stack-form">
                <h3 class="form-title">Kayıt ol</h3>
                <label for="register-username">Kullanıcı adı</label>
                <input
                  id="register-username"
                  name="username"
                  autocomplete="username"
                  required
                />

                <label for="register-email">E-posta</label>
                <input
                  id="register-email"
                  name="email"
                  type="email"
                  autocomplete="email"
                  required
                />

                <label for="register-password">Şifre</label>
                <input
                  id="register-password"
                  name="password"
                  type="password"
                  autocomplete="new-password"
                  required
                />

                <button type="submit" class="btn primary-btn">Kayıt ol</button>
              </form>

              <form id="login-form" class="stack-form">
                <h3 class="form-title">Giriş yap</h3>
                <label for="login-email">E-posta</label>
                <input
                  id="login-email"
                  name="email"
                  type="email"
                  autocomplete="email"
                  required
                />

                <label for="login-password">Şifre</label>
                <input
                  id="login-password"
                  name="password"
                  type="password"
                  autocomplete="current-password"
                  required
                />

                <button type="submit" class="btn secondary-btn">
                  Giriş yap
                </button>
              </form>
            </div>

            <div id="auth-message" class="message"></div>
          </section>

          <section class="card new-prediction-card">
            <h2>Yeni tahmin</h2>
            <form id="prediction-form" class="stack-form" novalidate>
              <label
                for="prediction-title"
                data-i18n="prediction.form.title"
              >
                Başlık
              </label>
              <input
                id="prediction-title"
                name="title"
                placeholder="Kısa bir başlık"
                required
              />

              <label
                for="prediction-content"
                data-i18n="prediction.form.content"
              >
                Tahminin
              </label>

              <textarea
                id="prediction-content"
                name="content"
                rows="4"
                placeholder="Ne olacağını düşünüyorsun?"
                required
              ></textarea>

              <div class="two-col">
                <div>
                  <label for="prediction-date">Açılma tarihi</label>
                  <input
                    id="prediction-date"
                    name="targetDate"
                    type="date"
                    required
                  />
                </div>

                <div>
                  <label for="prediction-category">Kategori</label>
                  <input
                    id="prediction-category"
                    name="category"
                    type="text"
                    list="prediction-category-list"
                    placeholder="Örn: Sports, Seçim, Borsa"
                    required
                  />
                  <datalist id="prediction-category-list"></datalist>
                </div>
              </div>

              <button
                type="submit"
                class="btn primary-btn"
                data-i18n="prediction.form.submit"
              >
                Tahmini mühürle
              </button>
            </form>

            <div id="prediction-message" class="message"></div>
            <div id="prediction-from-comment-hint" class="small"></div>
            <p class="small subtle">
              Geçmiş tarihe tahmin yapılamaz. Tahminler açılma tarihine kadar
              senden bile gizli kalır.
            </p>
          </section>
        </aside>

        <!-- ORTA SÜTUN: TABS + FEED/MINE/EXPLORE/STATS -->
        <section class="content-main">
                    <nav class="tabs">
            <button
              class="tab-button is-active"
              type="button"
              data-tab="feed"
              data-i18n="nav.feed"
            >
              Akış
            </button>
            <button
              class="tab-button"
              type="button"
              data-tab="mine"
              data-i18n="nav.my_predictions"
            >
              Tahminlerim
            </button>
            <button
              class="tab-button"
              type="button"
              data-tab="explore"
              data-i18n="nav.explore"
            >
              Keşfet
            </button>
            <button
              class="tab-button"
              type="button"
              data-tab="stats"
              data-i18n="nav.stats"
            >
              İstatistik
            </button>
          </nav>


          <section id="tab-feed" class="tab-panel is-active">
            <div class="panel-header">
              <h2>Akış</h2>
              <p class="small subtle">
                Senin ve takip ettiklerinin tahminleri burada görünür.
              </p>
            </div>
            <div id="feed-list" class="list"></div>
          </section>
          

          <section id="tab-mine" class="tab-panel">
            <div class="panel-header">
              <h2>Tahminlerim</h2>
              <p class="small subtle">
                Kendi mühürlü ve açılmış tahminlerini burada görürsün.
              </p>
            </div>

            <div class="filters-row">
              <div class="filter">
                <label for="my-predictions-filter-status">Durum</label>
                <select id="my-predictions-filter-status">
                  <option value="">Tümü</option>
                  <option value="pending">Beklemede</option>
                  <option value="correct">Doğru</option>
                  <option value="incorrect">Yanlış</option>
                </select>
              </div>
              <div class="filter">
                <label for="my-predictions-filter-category">Kategori</label>
                <select id="my-predictions-filter-category">
                  <option value="">Tümü</option>
                  <!-- app.js dolduracak -->
                </select>
              </div>
              <div class="filter">
                <label>&nbsp;</label>
                <button
                  id="my-predictions-clear-filters"
                  type="button"
                  class="btn ghost-btn"
                >
                  Filtreleri temizle
                </button>
              </div>
            </div>

            <div id="my-predictions-summary" class="small subtle"></div>
            <div id="my-predictions-list" class="list"></div>
          </section>

          <section id="tab-explore" class="tab-panel">
            <div class="panel-header">
              <h2>Keşfet</h2>
              <p class="small subtle">
                Yeni kullanıcıları ve ilginç tahminleri keşfet.
              </p>
            </div>
            <div id="explore-users" class="list"></div>
          </section>

          <section id="tab-stats" class="tab-panel" aria-label="İstatistik">
            <h2>İstatistik</h2>
            <p class="subtitle">
              Kendi tahmin performansını ve kategori bazında dağılımını gör.
            </p>
            <div id="my-stats" class="stats-grid">
              <p class="small subtle">Veriler yükleniyor...</p>
            </div>

            <div id="leaderboard-card" class="leaderboard-card">
              <div class="card stats-card" id="myStrengthsCard">
                <h3>Güçlü olduğun kategoriler</h3>
                <p class="small subtle">
                  En az birkaç kez tahmin yaptığın ve en yüksek başarı oranına sahip olduğun alanlar.
                </p>
                <div id="myBestCategories"></div>
              </div>
              <h3>En isabetli tahminciler</h3>
              <p class="small subtle">
                Kategori seçerek en yüksek başarı oranına sahip kullanıcıları görebilirsin.
              </p>
              <div class="leaderboard-filters">
                <label class="small">
                  Kategori:
                  <select id="leaderboard-category"></select>
                </label>
                <label class="small">
                  Min. çözülen tahmin:
                  <input
                    id="leaderboard-min-resolved"
                    type="number"
                    value="10"
                    min="1"
                    style="width: 60px;"
                  />
                </label>
                <button id="leaderboard-refresh" type="button">
                  Yenile
                </button>
              </div>
              <div id="leaderboard-body" class="leaderboard-body small">
                <p class="small subtle">Liderlik tablosu yükleniyor...</p>
              </div>
            </div>
          </section>

        </section>

        <!-- SAĞ SÜTUN: PROFIL + DETAY + YORUMLAR -->
        <aside class="sidebar-right">
          <section class="card" id="profile-section">
            <h2>Profil</h2>
            <button
              id="profile-follow-btn"
              class="btn secondary-btn"
              style="display: none; margin-bottom: 6px;"
            >
              Takip et
            </button>

            <div id="profile-details" class="profile-header">
              <p class="small subtle">
                Bir kullanıcı adına tıkladığında profili burada görünür.
              </p>
            </div>

            <div id="profile-category-stats" class="profile-category-stats">
              <p class="small subtle">
                Bu kullanıcı için kategori bazlı istatistik yok.
              </p>
            </div>

            <div id="profile-predictions" class="profile-stats list">
              <p class="small subtle">
                Bu kullanıcının açılmış tahminleri burada görünecek.
              </p>
            </div>

          </section>


          <section class="card" id="following-section">
            <h2>Takip ettiklerim</h2>
            <div id="following-list" class="list">
              <p class="small subtle">Henüz kimseyi takip etmiyorsun.</p>
            </div>
          </section>

          <section class="card" id="prediction-detail-section">
            <h2>Seçili tahmin detayı</h2>
            <div id="prediction-detail">
              <p class="small">
                Bir tahmine tıklayarak detayını burada görebilirsiniz.
              </p>
            </div>

            <div id="prediction-comments">
              <h3>Yorumlar</h3>
              <div id="comments-list">
                <p class="small">Bu tahmine henüz yorum yapılmamış.</p>
              </div>

              <!-- form'a stack-form class'ı ekledik -->
              <form id="comment-form" class="stack-form" novalidate>
                <label for="comment-content">Yorum yaz</label>
                <textarea
                  id="comment-content"
                  rows="3"
                  placeholder="Bu tahmin hakkında fikrini yaz..."
                  required
                ></textarea>
                <button type="submit" class="btn secondary-btn">
                  Yorum ekle
                </button>
              </form>

              <div id="comment-message" class="message"></div>
            </div>
          </section>

        </aside>
      </main>
    </div>
     <!-- SAYFA: PROFİL -->
      <div class="app-page" id="page-profile">
        <main class="single-page-main">
          <section class="card">
            <h2>Profilim</h2>
            <p class="small subtle">
              Burası tam profil sayfası. Sağ sütundaki mini profil kutusundaki bilgileri
              buraya taşıyacağız ve ekstra istatistikler ekleyeceğiz.
            </p>

            <div id="profile-page-content">
              <!-- Profil içeriğini app.js içindeki loadMyProfilePage dolduruyor -->
            </div>
          </section>
        </main>
      </div>



      <!-- SAYFA: MESAJLAR -->
            <!-- SAYFA: MESAJLAR -->
      <div class="app-page" id="page-messages">
        <main class="single-page-main">
          <section class="card">
            <h2>Mesajlar</h2>

            <div class="messages-layout">
              <aside class="messages-sidebar">
                <div class="messages-sidebar-header">Sohbetler</div>
                <ul id="messages-thread-list" class="messages-thread-list"></ul>
              </aside>

              <section class="messages-main">
                <div id="messages-empty-state" class="messages-empty">
                  Henüz bir sohbet seçmedin. Soldan bir kullanıcıya tıkla veya yeni mesaj başlat.
                </div>

                <div id="messages-conversation" class="messages-conversation hidden">
                  <div
                    id="messages-conversation-header"
                    class="messages-conversation-header"
                  >
                    <!-- Başlık JS ile doldurulacak -->
                  </div>

                  <div
                    id="messages-conversation-body"
                    class="messages-conversation-body"
                  >
                    <!-- Mesaj balonları JS ile doldurulacak -->
                  </div>

                  <form id="messages-send-form" class="messages-send-form">
                    <input
                      id="messages-input"
                      type="text"
                      autocomplete="off"
                      placeholder="Mesaj yaz..."
                    />
                    <button type="submit">Gönder</button>
                  </form>
                </div>
              </section>
            </div>
          </section>
        </main>
      </div>


      <!-- SAYFA: AYARLAR -->
      <div class="app-page" id="page-settings">
        <main class="single-page-main">
          <section class="card">
            <h2>Ayarlar</h2>
            <p class="small subtle">
              Gelecekte e-posta, dil, bildirim tercihleri, gizlilik gibi ayarlar burada olacak.
            </p>

            <form class="stack-form">
              <label for="settings-language">Dil</label>
              <select id="settings-language" disabled>
                <option>Şimdilik üst çubuktaki dilden yönetiliyor</option>
              </select>

              <label for="settings-theme">Tema</label>
              <select id="settings-theme" disabled>
                <option>Karanlık tema (aktif)</option>
              </select>

              <p class="small subtle">
                Bu sayfa şu an iskelet durumda. Sonra backend tarafıyla
                birlikte gerçek ayarları bağlarız.
              </p>
            </form>
          </section>
        </main>
      </div>

    </div> <!-- /app-shell -->

    <script src="app.js"></script>
  </body>
</html>
